<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡å­—æ¡†é«˜åº¦é™åˆ¶æµ‹è¯•</title>
    <style>
        :root {
            --bg: #f5f7fa;
            --panel-bg: white;
            --text: #1e293b;
            --muted: #64748b;
            --accent: #6366f1;
            --accent-hover: #5558e3;
            --accent-light: #e0e7ff;
            --border: #e2e8f0;
            --radius: 12px;
            --radius-sm: 8px;
            --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font);
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .test-header {
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .test-header h1 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .test-header p {
            margin: 8px 0 0 0;
            opacity: 0.9;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .test-section {
            background: var(--panel-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .test-section h2 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .test-iframe {
            width: 100%;
            height: 700px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: white;
        }

        .test-controls {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .test-btn {
            padding: 8px 16px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .test-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .test-btn.secondary {
            background: transparent;
            color: var(--muted);
            border: 1px solid var(--border);
        }

        .test-btn.secondary:hover {
            background: var(--accent-light);
            color: var(--accent);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.success {
            background: #22c55e;
        }

        .status-indicator.error {
            background: #ef4444;
        }

        .status-indicator.warning {
            background: #f59e0b;
        }

        .layout-status {
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            margin: 10px 0;
            font-weight: 500;
        }

        .layout-status.success {
            background: #f0fdf4;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .layout-status.error {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .layout-status.warning {
            background: #fffbeb;
            color: #92400e;
            border: 1px solid #fed7aa;
        }

        .checklist {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin: 15px 0;
        }

        .checklist h3 {
            margin: 0 0 10px 0;
            color: var(--text);
            font-size: 1.1rem;
        }

        .checklist ul {
            margin: 0;
            padding-left: 20px;
        }

        .checklist li {
            margin: 5px 0;
            color: var(--text);
        }

        .checklist li.pass {
            color: #166534;
        }

        .checklist li.fail {
            color: #dc2626;
        }

        .height-monitor {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
        }

        .height-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 5px 0;
            border-bottom: 1px solid var(--border);
        }

        .height-item:last-child {
            border-bottom: none;
        }

        .height-value {
            font-weight: bold;
            color: var(--accent);
        }

        .height-status {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
        }

        .height-status.ok {
            background: #bbf7d0;
            color: #166534;
        }

        .height-status.warning {
            background: #fed7aa;
            color: #92400e;
        }

        .height-status.error {
            background: #fecaca;
            color: #dc2626;
        }

        .responsive-test {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .responsive-device {
            flex: 1;
            min-width: 300px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 15px;
            background: white;
        }

        .responsive-device h4 {
            margin: 0 0 10px 0;
            color: var(--accent);
        }

        .device-iframe {
            width: 100%;
            height: 500px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
        }

        @media (max-width: 768px) {
            .test-container {
                padding: 15px;
            }

            .test-iframe {
                height: 600px;
            }

            .responsive-device {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>ğŸ”§ æ–‡å­—æ¡†é«˜åº¦é™åˆ¶æµ‹è¯•</h1>
        <p>éªŒè¯æ–‡å­—æ¡†é«˜åº¦é™åˆ¶å’Œå¸ƒå±€é¡ºåºä¿®å¤æ•ˆæœ</p>
    </div>

    <div class="test-container">
        <!-- ä¸»è¦æµ‹è¯•åŒºåŸŸ -->
        <div class="test-section">
            <h2><span class="status-indicator success"></span>å®æ—¶é«˜åº¦ç›‘æ§</h2>
            
            <div class="test-controls">
                <button class="test-btn" onclick="refreshMainTest()">ğŸ”„ åˆ·æ–°æµ‹è¯•</button>
                <button class="test-btn secondary" onclick="checkHeights()">ğŸ“ æ£€æŸ¥é«˜åº¦</button>
                <button class="test-btn secondary" onclick="fillTextContent()">ğŸ“ å¡«å……æµ‹è¯•å†…å®¹</button>
                <button class="test-btn secondary" onclick="clearTextContent()">ğŸ—‘ï¸ æ¸…ç©ºå†…å®¹</button>
                <button class="test-btn secondary" onclick="simulateMobileMode()">ğŸ“± æ¨¡æ‹Ÿç§»åŠ¨ç«¯</button>
                <button class="test-btn secondary" onclick="forceHeightCheck()">ğŸ” å¼ºåˆ¶é«˜åº¦æ£€æŸ¥</button>
            </div>

            <div id="layout-status" class="layout-status success">
                âœ… é«˜åº¦ç›‘æ§ç³»ç»Ÿå·²å¯åŠ¨ï¼Œæ­£åœ¨å®æ—¶ç›‘æ§...
            </div>

            <div id="height-monitor" class="height-monitor">
                <div class="height-item">
                    <span>æ–‡å­—æ¡†é«˜åº¦ç›‘æ§ï¼š</span>
                    <span class="height-value" id="output-height">ç­‰å¾…æ£€æµ‹...</span>
                </div>
                <div class="height-item">
                    <span>æ–‡å­—æ¡†æœ€å¤§é«˜åº¦é™åˆ¶ï¼š</span>
                    <span class="height-value" id="output-max-height">ç­‰å¾…æ£€æµ‹...</span>
                </div>
                <div class="height-item">
                    <span>æ–‡å­—æ¡†æœ€å°é«˜åº¦é™åˆ¶ï¼š</span>
                    <span class="height-value" id="output-min-height">ç­‰å¾…æ£€æµ‹...</span>
                </div>
                <div class="height-item">
                    <span>å¿«æ·åŒºåŸŸé«˜åº¦ï¼š</span>
                    <span class="height-value" id="quick-height">ç­‰å¾…æ£€æµ‹...</span>
                </div>
                <div class="height-item">
                    <span>è¾“å…¥åŒºåŸŸé«˜åº¦ï¼š</span>
                    <span class="height-value" id="input-height">ç­‰å¾…æ£€æµ‹...</span>
                </div>
                <div class="height-item">
                    <span>æ€»ä½“å¸ƒå±€çŠ¶æ€ï¼š</span>
                    <span class="height-status" id="overall-status">ç­‰å¾…æ£€æµ‹</span>
                </div>
            </div>

            <iframe id="main-test" class="test-iframe" src="index.html"></iframe>
        </div>

        <!-- å¸ƒå±€éªŒè¯æ¸…å• -->
        <div class="test-section">
            <h2><span class="status-indicator success"></span>é«˜åº¦é™åˆ¶éªŒè¯æ¸…å•</h2>
            
            <div class="checklist">
                <h3>ğŸ“ é«˜åº¦é™åˆ¶æ£€æŸ¥</h3>
                <ul id="height-checks">
                    <li>æ–‡å­—æ¡†æœ‰æœ€å¤§é«˜åº¦é™åˆ¶ (max-height)</li>
                    <li>æ–‡å­—æ¡†æœ‰æœ€å°é«˜åº¦é™åˆ¶ (min-height)</li>
                    <li>æ–‡å­—æ¡†é«˜åº¦ä¸è¶…è¿‡æœ€å¤§é™åˆ¶</li>
                    <li>å¿«æ·åŒºåŸŸé«˜åº¦è¢«æ­£ç¡®é™åˆ¶</li>
                    <li>è¾“å…¥åŒºåŸŸé«˜åº¦è¢«æ­£ç¡®é™åˆ¶</li>
                </ul>
            </div>

            <div class="checklist">
                <h3>ğŸ”§ å¸ƒå±€çº¦æŸæ£€æŸ¥</h3>
                <ul id="constraint-checks">
                    <li>å¿«æ·åŒºåŸŸåœ¨æ–‡å­—åŒºåŸŸä¸‹æ–¹ (order: 3)</li>
                    <li>è¾“å…¥åŒºåŸŸåœ¨å¿«æ·åŒºåŸŸä¸‹æ–¹ (order: 4)</li>
                    <li>æ‰€æœ‰åŒºåŸŸéƒ½æœ‰ clear: both å±æ€§</li>
                    <li>æ‰€æœ‰åŒºåŸŸéƒ½æœ‰ isolation: isolate å±æ€§</li>
                    <li>å®¹å™¨æœ‰æ­£ç¡®çš„ flex å¸ƒå±€</li>
                </ul>
            </div>

            <div class="checklist">
                <h3>ğŸ“± å“åº”å¼æ£€æŸ¥</h3>
                <ul id="responsive-checks">
                    <li>ç§»åŠ¨ç«¯æ–‡å­—æ¡†é«˜åº¦æ­£ç¡®é€‚é…</li>
                    <li>ç§»åŠ¨ç«¯å¸ƒå±€é¡ºåºä¿æŒæ­£ç¡®</li>
                    <li>è§¦æ‘¸è®¾å¤‡ä¼˜åŒ–æ­£å¸¸å·¥ä½œ</li>
                    <li>ä¸åŒå±å¹•å°ºå¯¸ä¸‹å¸ƒå±€ç¨³å®š</li>
                </ul>
            </div>
        </div>

        <!-- å®æ—¶ç›‘æ§æ—¥å¿— -->
        <div class="test-section">
            <h2><span class="status-indicator warning"></span>å®æ—¶ç›‘æ§æ—¥å¿—</h2>
            
            <div id="monitor-log" style="background: #f8fafc; border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 15px; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                <div style="color: #64748b;">ç­‰å¾…é«˜åº¦ç›‘æ§ç³»ç»Ÿå¯åŠ¨...</div>
            </div>
        </div>
    </div>

    <script>
        let checkCount = 0;
        let heightErrors = 0;
        
        // é«˜åº¦æ£€æŸ¥å‡½æ•°
        function checkHeights() {
            const iframe = document.getElementById('main-test');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            if (!iframeDoc) {
                updateStatus('æ— æ³•è®¿é—®iframeå†…å®¹ï¼Œè¯·æ£€æŸ¥åŒæºç­–ç•¥', 'error');
                return;
            }

            const output = iframeDoc.querySelector('#output');
            const quickActions = iframeDoc.querySelector('.quick-actions');
            const inputArea = iframeDoc.querySelector('#input-area');

            if (!output || !quickActions || !inputArea) {
                updateStatus('æ‰¾ä¸åˆ°å¿…è¦çš„é¡µé¢å…ƒç´ ', 'error');
                return;
            }

            // è·å–é«˜åº¦ä¿¡æ¯
            const outputHeight = output.offsetHeight;
            const outputMaxHeight = parseInt(window.getComputedStyle(output).maxHeight) || 'æœªè®¾ç½®';
            const outputMinHeight = parseInt(window.getComputedStyle(output).minHeight) || 'æœªè®¾ç½®';
            const quickHeight = quickActions.offsetHeight;
            const inputHeight = inputArea.offsetHeight;

            // æ›´æ–°é«˜åº¦ç›‘æ§æ˜¾ç¤º
            document.getElementById('output-height').textContent = `${outputHeight}px`;
            document.getElementById('output-max-height').textContent = outputMaxHeight !== 'æœªè®¾ç½®' ? `${outputMaxHeight}px` : 'æœªè®¾ç½®';
            document.getElementById('output-min-height').textContent = outputMinHeight !== 'æœªè®¾ç½®' ? `${outputMinHeight}px` : 'æœªè®¾ç½®';
            document.getElementById('quick-height').textContent = `${quickHeight}px`;
            document.getElementById('input-height').textContent = `${inputHeight}px`;

            // æ£€æŸ¥é«˜åº¦é™åˆ¶
            let allCorrect = true;
            let issues = [];

            // æ£€æŸ¥æœ€å¤§é«˜åº¦é™åˆ¶
            if (outputMaxHeight !== 'æœªè®¾ç½®') {
                if (outputHeight > outputMaxHeight) {
                    allCorrect = false;
                    issues.push(`æ–‡å­—æ¡†è¶…å‡ºæœ€å¤§é«˜åº¦é™åˆ¶ (${outputHeight}px > ${outputMaxHeight}px)`);
                }
            } else {
                allCorrect = false;
                issues.push('æ–‡å­—æ¡†æ²¡æœ‰è®¾ç½®æœ€å¤§é«˜åº¦é™åˆ¶');
            }

            // æ£€æŸ¥æœ€å°é«˜åº¦é™åˆ¶
            if (outputMinHeight !== 'æœªè®¾ç½®') {
                if (outputHeight < outputMinHeight) {
                    allCorrect = false;
                    issues.push(`æ–‡å­—æ¡†ä½äºæœ€å°é«˜åº¦é™åˆ¶ (${outputHeight}px < ${outputMinHeight}px)`);
                }
            } else {
                allCorrect = false;
                issues.push('æ–‡å­—æ¡†æ²¡æœ‰è®¾ç½®æœ€å°é«˜åº¦é™åˆ¶');
            }

            // æ›´æ–°æ•´ä½“çŠ¶æ€
            const overallStatus = document.getElementById('overall-status');
            if (allCorrect) {
                overallStatus.textContent = 'æ­£å¸¸';
                overallStatus.className = 'height-status ok';
                updateStatus(`âœ… é«˜åº¦æ£€æŸ¥é€šè¿‡ï¼æ‰€æœ‰é«˜åº¦é™åˆ¶æ­£å¸¸ (æ£€æŸ¥ #${++checkCount})`, 'success');
            } else {
                overallStatus.textContent = 'å¼‚å¸¸';
                overallStatus.className = 'height-status error';
                updateStatus(`âŒ é«˜åº¦æ£€æŸ¥å¤±è´¥ï¼å‘ç° ${issues.length} ä¸ªé—®é¢˜ (æ£€æŸ¥ #${++checkCount})`, 'error');
                heightErrors++;
            }

            // æ›´æ–°æ£€æŸ¥æ¸…å•
            updateHeightChecklist(issues, {
                hasMaxHeight: outputMaxHeight !== 'æœªè®¾ç½®',
                hasMinHeight: outputMinHeight !== 'æœªè®¾ç½®',
                outputWithinLimits: allCorrect,
                quickHeight: quickHeight,
                inputHeight: inputHeight
            });

            // è®°å½•åˆ°æ—¥å¿—
            logToConsole({
                timestamp: new Date().toLocaleTimeString(),
                outputHeight,
                outputMaxHeight,
                outputMinHeight,
                quickHeight,
                inputHeight,
                issues,
                allCorrect
            });
        }

        // æ›´æ–°é«˜åº¦æ£€æŸ¥æ¸…å•
        function updateHeightChecklist(issues, data) {
            const heightChecks = document.getElementById('height-checks');
            heightChecks.innerHTML = `
                <li class="${data.hasMaxHeight ? 'pass' : 'fail'}">${data.hasMaxHeight ? 'âœ…' : 'âŒ'} æ–‡å­—æ¡†æœ‰æœ€å¤§é«˜åº¦é™åˆ¶ (max-height)</li>
                <li class="${data.hasMinHeight ? 'pass' : 'fail'}">${data.hasMinHeight ? 'âœ…' : 'âŒ'} æ–‡å­—æ¡†æœ‰æœ€å°é«˜åº¦é™åˆ¶ (min-height)</li>
                <li class="${data.outputWithinLimits ? 'pass' : 'fail'}">${data.outputWithinLimits ? 'âœ…' : 'âŒ'} æ–‡å­—æ¡†é«˜åº¦ä¸è¶…è¿‡æœ€å¤§é™åˆ¶</li>
                <li class="pass">âœ… å¿«æ·åŒºåŸŸé«˜åº¦è¢«æ­£ç¡®é™åˆ¶ (${data.quickHeight}px)</li>
                <li class="pass">âœ… è¾“å…¥åŒºåŸŸé«˜åº¦è¢«æ­£ç¡®é™åˆ¶ (${data.inputHeight}px)</li>
            `;

            // æ£€æŸ¥å¸ƒå±€çº¦æŸ
            const iframe = document.getElementById('main-test');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            if (iframeDoc) {
                const container = iframeDoc.querySelector('.container');
                const output = iframeDoc.querySelector('#output');
                const quickActions = iframeDoc.querySelector('.quick-actions');
                const inputArea = iframeDoc.querySelector('#input-area');
                
                if (container && output && quickActions && inputArea) {
                    const constraintChecks = [
                        {
                            name: 'å¿«æ·åŒºåŸŸåœ¨æ–‡å­—åŒºåŸŸä¸‹æ–¹ (order: 3)',
                            check: parseInt(window.getComputedStyle(quickActions).order) === 3
                        },
                        {
                            name: 'è¾“å…¥åŒºåŸŸåœ¨å¿«æ·åŒºåŸŸä¸‹æ–¹ (order: 4)',
                            check: parseInt(window.getComputedStyle(inputArea).order) === 4
                        },
                        {
                            name: 'å¿«æ·åŒºåŸŸæœ‰ clear: both',
                            check: window.getComputedStyle(quickActions).clear === 'both'
                        },
                        {
                            name: 'è¾“å…¥åŒºåŸŸæœ‰ clear: both',
                            check: window.getComputedStyle(inputArea).clear === 'both'
                        },
                        {
                            name: 'å®¹å™¨æœ‰ isolation: isolate',
                            check: window.getComputedStyle(container).isolation === 'isolate'
                        }
                    ];
                    
                    document.getElementById('constraint-checks').innerHTML = constraintChecks.map(c => {
                        const status = c.check ? 'âœ…' : 'âŒ';
                        const className = c.check ? 'pass' : 'fail';
                        return `<li class="${className}">${status} ${c.name}</li>`;
                    }).join('');
                }
            }
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(message, type = 'success') {
            const statusDiv = document.getElementById('layout-status');
            const icons = {
                success: 'âœ…',
                error: 'âŒ',
                warning: 'âš ï¸'
            };
            
            statusDiv.className = `layout-status ${type}`;
            statusDiv.innerHTML = `${icons[type]} ${message}`;
        }

        // è®°å½•åˆ°æ§åˆ¶å°æ—¥å¿—
        function logToConsole(data) {
            const logDiv = document.getElementById('monitor-log');
            const logEntry = document.createElement('div');
            logEntry.style.marginBottom = '5px';
            logEntry.innerHTML = `<span style="color: #64748b;">[${data.timestamp}]</span> é«˜åº¦æ£€æŸ¥ #${checkCount}: ${data.allCorrect ? 'æ­£å¸¸' : 'å¼‚å¸¸'} (æ–‡å­—æ¡†: ${data.outputHeight}px)`;
            
            if (data.issues && data.issues.length > 0) {
                logEntry.innerHTML += ` - é—®é¢˜: ${data.issues.join(', ')}`;
            }
            
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡
            while (logDiv.children.length > 20) {
                logDiv.removeChild(logDiv.firstChild);
            }
        }

        // åˆ·æ–°æµ‹è¯•
        function refreshMainTest() {
            const iframe = document.getElementById('main-test');
            iframe.src = iframe.src;
            updateStatus('ğŸ”„ æ­£åœ¨åˆ·æ–°æµ‹è¯•é¡µé¢...', 'warning');
        }

        // å¡«å……æµ‹è¯•å†…å®¹
        function fillTextContent() {
            const iframe = document.getElementById('main-test');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            if (iframeDoc) {
                const output = iframeDoc.querySelector('#output');
                if (output) {
                    // ç”Ÿæˆå¤§é‡æµ‹è¯•å†…å®¹
                    let content = '<p><strong>ğŸ§ª é«˜åº¦æµ‹è¯•å†…å®¹ç”Ÿæˆä¸­...</strong></p>';
                    for (let i = 1; i <= 50; i++) {
                        content += `<p>è¿™æ˜¯ç¬¬ ${i} è¡Œæµ‹è¯•å†…å®¹ã€‚ç”¨äºéªŒè¯æ–‡å­—æ¡†æ˜¯å¦ä¼šåœ¨å†…å®¹è¿‡å¤šæ—¶æ­£ç¡®é™åˆ¶é«˜åº¦ï¼Œå¹¶ä¿æŒå¿«æ·åŒºåŸŸå’Œè¾“å…¥æ¡†åœ¨æ­£ç¡®ä½ç½®ã€‚</p>`;
                    }
                    content += '<p><strong>âœ… æµ‹è¯•å†…å®¹ç”Ÿæˆå®Œæˆï¼ç°åœ¨æ£€æŸ¥æ–‡å­—æ¡†é«˜åº¦æ˜¯å¦è¢«æ­£ç¡®é™åˆ¶ã€‚</strong></p>';
                    
                    output.innerHTML = content;
                    updateStatus('ğŸ“ å·²å¡«å……50è¡Œæµ‹è¯•å†…å®¹ï¼Œè¯·æ£€æŸ¥é«˜åº¦é™åˆ¶æ•ˆæœ', 'warning');
                    
                    // å»¶è¿Ÿæ£€æŸ¥é«˜åº¦
                    setTimeout(checkHeights, 500);
                }
            }
        }

        // æ¸…ç©ºå†…å®¹
        function clearTextContent() {
            const iframe = document.getElementById('main-test');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            if (iframeDoc) {
                const output = iframeDoc.querySelector('#output');
                if (output) {
                    output.innerHTML = '<p>å†…å®¹å·²æ¸…ç©º</p>';
                    updateStatus('ğŸ—‘ï¸ å·²æ¸…ç©ºæ–‡å­—æ¡†å†…å®¹', 'warning');
                    
                    // å»¶è¿Ÿæ£€æŸ¥é«˜åº¦
                    setTimeout(checkHeights, 500);
                }
            }
        }

        // æ¨¡æ‹Ÿç§»åŠ¨ç«¯
        function simulateMobileMode() {
            const iframe = document.getElementById('main-test');
            iframe.style.width = '375px';
            iframe.style.height = '667px';
            iframe.style.transform = 'scale(0.8)';
            iframe.style.transformOrigin = 'top left';
            iframe.style.margin = '0 auto';
            updateStatus('ğŸ“± å·²åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯æ¨¡æ‹Ÿæ¨¡å¼', 'warning');
            
            // å»¶è¿Ÿæ£€æŸ¥é«˜åº¦
            setTimeout(checkHeights, 1000);
        }

        // å¼ºåˆ¶é«˜åº¦æ£€æŸ¥
        function forceHeightCheck() {
            const iframe = document.getElementById('main-test');
            const iframeWindow = iframe.contentWindow;
            
            if (iframeWindow && typeof iframeWindow.enforceLayoutOrder === 'function') {
                iframeWindow.enforceLayoutOrder();
                updateStatus('ğŸ” å·²å¼ºåˆ¶æ‰§è¡Œé«˜åº¦æ£€æŸ¥å’Œä¿®æ­£', 'success');
                
                // å»¶è¿Ÿå†æ¬¡æ£€æŸ¥
                setTimeout(checkHeights, 500);
            } else {
                updateStatus('âŒ æ— æ³•è®¿é—®é«˜åº¦ä¿®æ­£å‡½æ•°ï¼Œè¯·ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½', 'error');
            }
        }

        // å¯åŠ¨è‡ªåŠ¨ç›‘æ§
        function startAutoMonitoring() {
            // åˆå§‹æ£€æŸ¥
            setTimeout(() => {
                checkHeights();
                updateStatus('ğŸš€ è‡ªåŠ¨é«˜åº¦ç›‘æ§ç³»ç»Ÿå·²å¯åŠ¨', 'success');
            }, 3000);
            
            // æ¯3ç§’è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡
            setInterval(checkHeights, 3000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨ç›‘æ§
        window.addEventListener('load', () => {
            updateStatus('â³ æ­£åœ¨ç­‰å¾…æµ‹è¯•é¡µé¢åŠ è½½...', 'warning');
            startAutoMonitoring();
        });

        // ç›‘å¬iframeåŠ è½½å®Œæˆ
        document.getElementById('main-test').addEventListener('load', () => {
            updateStatus('ğŸ“„ æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹é«˜åº¦æ£€æŸ¥...', 'warning');
            setTimeout(checkHeights, 1000);
        });
    </script>
</body>
</html>