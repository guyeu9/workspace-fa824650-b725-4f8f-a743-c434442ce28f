## 🎯 错误修复与界面优化方案

### 当前问题分析

**热更新错误**：`net::ERR_ABORTED` 错误表明Webpack热更新模块加载失败，这是开发环境的常见问题，不影响生产环境。

### 修复与优化计划

#### 1. 修复热更新错误
- **清理构建缓存**：删除.next目录和node_modules缓存
- **重启开发服务器**：使用干净的构建环境
- **禁用热更新**（可选）：在开发环境中临时禁用HMR

#### 2. 优化文本游戏制作界面UI
**目标**：与游戏库管理界面保持一致的设计风格

**具体改进**：
- **统一色彩方案**：使用与游戏库相同的渐变色系（indigo-purple梯度）
- **卡片式布局**：采用圆角卡片设计，提升视觉层次
- **现代化控件**：使用Shadcn UI组件库的统一样式
- **响应式设计**：确保在各种屏幕尺寸下的良好体验

#### 3. 简化游戏制作流程
**当前痛点**：
- 分支管理复杂，用户容易迷失
- 缺乏直观的流程引导
- 背景图片上传无大小限制提示

**优化方案**：

**A. 流程引导优化**
- 添加步骤指示器（1.基础信息 → 2.创建分支 → 3.添加选项 → 4.完成）
- 提供模板快速开始功能
- 增加必填字段验证和提示

**B. 分支管理优化**
- 可视化分支树状图，直观显示故事结构
- 拖拽式分支重排功能
- 分支快速复制和模板功能

**C. 背景图片优化**
- **文件大小限制**：添加5MB大小验证
- **图片预览**：上传前显示预览和压缩建议
- **格式验证**：限制为常用图片格式（jpg, png, webp）
- **上传进度**：显示上传进度条

#### 4. 界面一致性改造

**游戏编辑器界面重构**：
```
┌─────────────────────────────────────────────────────────┐
│  📝 文本游戏制作                    [保存] [预览] [导出] │
├─────────────────────────────────────────────────────────┤
│ 📋 基础信息                                             │
│ 游戏标题: [输入框]                                     │
│ 游戏描述: [文本域]                                     │
│                                                         │
│ 🌳 故事结构                    [+ 添加分支] [导图视图] │
│ ├─ 起始场景                                             │
│ │  └─ 选项1 → 场景A                                     │
│ │  └─ 选项2 → 场景B                                     │
│ │                                                       │
│ └─ 场景A                    [编辑] [删除] [↑] [↓]      │
│    └─ 选项1 → 场景C                                     │
│                                                         │
│ ✏️ 场景编辑                    [当前编辑: 场景A]       │
│ 场景名称: [输入框]                                     │
│ 场景描述: [文本域]                                     │
│ 背景图片: [上传按钮] (最大5MB)                         │
│ 📱 实时预览                                             │
│ [预览卡片显示当前场景效果]                             │
│                                                         │
│ 🎯 选择选项                        [+ 添加选项]          │
│ ├─ 选项1: [输入框] → [目标场景选择] [效果] [删除]     │
│ └─ 选项2: [输入框] → [目标场景选择] [效果] [删除]     │
└─────────────────────────────────────────────────────────┘
```

#### 5. 技术实现细节

**背景图片限制实现**：
```typescript
const handleImageUpload = async (file: File) => {
  // 文件大小验证（5MB限制）
  const maxSize = 5 * 1024 * 1024; // 5MB
  if (file.size > maxSize) {
    toast.error(`图片大小不能超过5MB，当前大小: ${(file.size / 1024 / 1024).toFixed(2)}MB`);
    return;
  }
  
  // 文件格式验证
  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    toast.error('请上传 JPG、PNG 或 WebP 格式的图片');
    return;
  }
  
  // 图片压缩处理
  const compressedFile = await compressImage(file, { maxWidth: 1920, maxHeight: 1080 });
  
  // 上传逻辑...
};
```

**界面组件统一**：
- 使用相同的卡片阴影和圆角设计
- 统一按钮样式和颜色方案
- 一致的间距和排版规范
- 统一的图标风格和大小

### 预期效果

1. **错误消除**：热更新错误完全解决
2. **界面美观**：与游戏库管理界面风格统一
3. **流程简化**：游戏制作步骤清晰，用户操作更直观
4. **性能提升**：图片大小限制避免内存问题
5. **体验优化**：实时预览和流程引导提升用户满意度

### 实施优先级

1. **高优先级**：错误修复和背景图片限制
2. **中优先级**：界面UI统一改造
3. **低优先级**：高级功能如拖拽排序等