# Proposal: Comprehensive Test Plan for Game Editor

## Context
当前游戏编辑器的测试点过少，需要进行全面且深度的功能验证，确保核心系统（分支、选项、数值、导入导出、数据持久化）在复杂场景下的稳定性和正确性。

## Scope
- **分支系统 (Branch System)**: 创建、编辑、删除、可视化导图。
- **选项系统 (Option System)**: 选项文本、跳转逻辑、结束游戏标记、效果说明。
- **数值系统 (Variable/State System)**: 游戏状态定义、初始值、百分比显示、数值变更逻辑。
- **数据持久化 (Persistence)**: IndexedDB 本地存储、SessionStorage 状态同步。
- **导入导出 (Import/Export)**: JSON 格式兼容性、批量导出、资产关联。
- **UI/UX**: 响应式布局、步骤引导、实时预览。

## Behavior
### 1. 复杂分支测试
- **输入**: 创建 5 个以上相互关联的分支，包括循环跳转（A -> B -> A）和深层嵌套（A -> B -> C -> D -> E）。
- **预期结果**: 导图正确渲染所有连接，跳转逻辑在播放器中执行无误。

### 2. 数值逻辑测试
- **输入**: 定义多个状态（如：生命、金币、好感度），并在选项中设置不同的变更效果。
- **预期结果**: 状态栏实时反映数值变化，且符合定义的最小值/最大值限制。

### 3. 数据完整性测试
- **输入**: 在 Studio 和旧版编辑器之间频繁切换，并执行多次保存和导入。
- **预期结果**: 游戏数据（包括背景图 URL 和状态配置）保持一致，无丢失。

### 4. 边界条件测试
- **输入**: 空标题保存、超大图片上传、非法 JSON 文件导入、无目标分支跳转。
- **预期结果**: 系统提供友好的错误提示，不崩溃，不损坏已有数据。

## Risks
- **数据结构不一致**: Studio 和旧版编辑器对 `choices` 和 `options` 的命名不同，可能导致解析错误。
- **图片上传延迟**: 依赖外部图床服务，可能因网络问题导致背景图加载失败。
- **浏览器兼容性**: IndexedDB 在某些隐私模式下可能不可用。

---
这份全面测试规范是否符合您的预期？请确认或提出修改。
