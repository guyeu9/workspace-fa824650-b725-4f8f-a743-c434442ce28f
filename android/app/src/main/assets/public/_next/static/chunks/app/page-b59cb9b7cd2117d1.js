(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2533:(e,t,s)=>{"use strict";s.d(t,{BS:()=>v,Ev:()=>a,FS:()=>d,Ho:()=>f,Hv:()=>i,L5:()=>y,Lw:()=>w,Ni:()=>o,Tc:()=>r,Ug:()=>u,fR:()=>h,g6:()=>j,gz:()=>m,mD:()=>x,pp:()=>g,wh:()=>l,wn:()=>c,xD:()=>b,xV:()=>p});var n=s(5155);let r=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("polyline",{points:"12 6 12 12 16 14"})]})},a=e=>{let{className:t=""}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},o=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,n.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},l=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]})},i=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},d=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,n.jsx)("polyline",{points:"17 21 17 13 7 13 7 21"}),(0,n.jsx)("polyline",{points:"7 3 7 8 15 8"})]})},c=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,n.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,n.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})},p=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,n.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,n.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,n.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})},m=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},x=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,n.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})},h=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("polyline",{points:"5 9 2 12 5 15"}),(0,n.jsx)("polyline",{points:"9 5 12 2 15 5"}),(0,n.jsx)("polyline",{points:"19 9 22 12 19 15"}),(0,n.jsx)("polyline",{points:"15 19 12 22 9 19"}),(0,n.jsx)("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),(0,n.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"22"})]})},u=e=>{let{className:t=""}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})},g=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M12 8v8"}),(0,n.jsx)("path",{d:"M8 12h8"})]})},b=e=>{let{className:t=""}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})},f=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,n.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})},y=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,n.jsx)("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),(0,n.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})},w=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,n.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},v=e=>{let{className:t=""}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})},j=e=>{let{className:t=""}=e;return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,n.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,n.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,n.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,n.jsx)("polyline",{points:"10 9 9 9 8 9"})]})}},3792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var n=s(5155),r=s(2115);let{Tc:a,Ev:o,Ni:l,wh:i,Hv:d,FS:c,wn:p,xV:m,gz:x,mD:h,fR:u,Ug:g,pp:b,xD:f,Ho:y,L5:w,Lw:v,BS:j,g6:N}=s(2533),k=e=>{let{text:t,delay:s=30,onComplete:a}=e,[o,l]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e,n=0,r=()=>{n<t.length?(l(e=>e+t.charAt(n)),n++,e=setTimeout(r,s)):(d(!0),a&&a())};return r(),()=>{e&&clearTimeout(e)}},[t,s,a]),i)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{children:o})};function C(){let[e,t]=(0,r.useState)(!0),[s,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[b,C]=(0,r.useState)([]),[L,_]=(0,r.useState)({health:100,stamina:100}),[H,W]=(0,r.useState)(!1),[S,D]=(0,r.useState)(null),[O,E]=(0,r.useState)(!1),[A,M]=(0,r.useState)(!1),[T,B]=(0,r.useState)(!1),[R,J]=(0,r.useState)([]),z=(0,r.useRef)(null),[I,U]=(0,r.useState)({start:"foyer",scenes:{foyer:{id:"foyer",name:"大厅",desc:"**欢迎来到文本冒险游戏！**\n\n这是一个演示场景，展示了文本引擎的核心功能。\n\n你可以使用以下命令：\n- **观察** 或 **LOOK** - 查看当前场景\n- **北** 或 **GO 北** - 向北移动\n- **物品** 或 **ITEMS** - 查看场景中的物品\n- **背包** 或 **INV** - 查看你的物品栏\n- **帮助** 或 **HELP** - 查看所有可用命令",img:"",exits:[{dir:"north",id:"reception"}],items:[{name:"高大的窗户",desc:"透过窗户，你可以看到外面美丽的风景。"},{name:"古老的挂钟",desc:"挂钟滴答作响，显示着当前时间。"}]},reception:{id:"reception",name:"接待处",desc:'**接待员** 站在柜台后面，微笑着向你打招呼。\n\n你可以使用 **TALK** 命令与角色交谈。\n\n向 **东** 是一扇关闭的 **门**，门上写着"实验室"。\n\n向 **南** 是你开始冒险的大厅。\n\n在 **柜台** 旁边是通往 **上** 的 **楼梯**。',exits:[{dir:"east",id:"lab"},{dir:"south",id:"foyer"},{dir:"up",id:"rooftop"}],items:[{name:"柜台",desc:"一个木质柜台，上面放着一些文件。"},{name:"门",desc:'门上有金属字母钉着，拼写为："RESEARCH LAB".'},{name:"楼梯",desc:"通往楼上的木质楼梯。"}]},lab:{id:"lab",name:"实验室",desc:"实验室里有一个 **蓝色机器人** 静静地悬浮在中央。它似乎在等待指示。\n\n（输入 **TALK** 与机器人交谈。）\n\n实验室的墙上挂着一面 **镜子**，反射着你的身影。",exits:[{dir:"west",id:"reception"}],items:[{name:"蓝色机器人",desc:"一个高科技机器人，闪烁着蓝色的灯光。"},{name:"镜子",desc:"一面普通的镜子，反射着实验室的景象。"}]},rooftop:{id:"rooftop",name:"屋顶",desc:"**你来到了屋顶！**\n\n从这里可以看到整个城市的景色。\n\n微风吹过，让你感到心旷神怡。\n\n这是演示的最后一个场景，你可以 **向下** 返回接待处。",exits:[{dir:"down",id:"reception"}],items:[{name:"望远镜",desc:"一个天文望远镜，可以观察星空。"},{name:"花园",desc:"屋顶上的小花园，种着各种花草。"}]}}});(0,r.useEffect)(()=>{E(!0)},[]),(0,r.useEffect)(()=>{{let e=localStorage.getItem("importedGameData");if(e)try{let t=JSON.parse(e);t.scenes&&t.start&&(U(t),M(!0),localStorage.removeItem("importedGameData"))}catch(e){console.error("Failed to load imported game data:",e)}}},[]),(0,r.useEffect)(()=>{{let s=sessionStorage.getItem("gameData");if(s)try{let n=JSON.parse(s);if(n.game_title&&n.branches&&Array.isArray(n.branches)){console.log("从JSON验证器加载游戏数据"),i([]),C([]),g([]);let s=n.branches[0];if(s){var e;let r={id:s.branch_id,name:s.chapter||s.branch_id,desc:s.scene_detail||"",exits:(null==(e=s.choices)?void 0:e.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]};D(r),g(r.exits),i([{type:"room-name",content:n.game_title,className:"room-name",fullContent:n.game_title},{type:"room-desc",content:n.description||"",fullContent:n.description||""},{type:"room-name",content:s.chapter||s.branch_id,className:"room-name",fullContent:s.chapter||s.branch_id},{type:"room-desc",content:s.scene_detail||"",fullContent:s.scene_detail||""}]),U({start:s.branch_id,scenes:n.branches.reduce((e,t)=>{var s;return e[t.branch_id]={id:t.branch_id,name:t.chapter||t.branch_id,desc:t.scene_detail||"",exits:(null==(s=t.choices)?void 0:s.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]},e},{})}),t(!1),sessionStorage.removeItem("gameData")}}}catch(e){console.error("Failed to load game data from sessionStorage:",e)}}},[]),(0,r.useEffect)(()=>{if(O&&A&&I&&I.scenes&&I.start){t(!1);let e=I.scenes[I.start];e&&(D(e),g(e.exits||[]),i([{type:"room-name",content:e.name,className:"room-name",fullContent:e.name},{type:"room-desc",content:e.desc,fullContent:e.desc}]))}},[O,A,I]);let V=()=>{e||setTimeout(()=>{let e=document.body.scrollHeight||document.documentElement.scrollHeight;window.scrollTo({top:e,behavior:"smooth"})},100)},F={north:"北",south:"南",east:"东",west:"西",up:"上",down:"下",n:"北",s:"南",e:"东",w:"西",u:"上",d:"下"},G=e=>{if("string"!=typeof e)return;let t=e.trim(),s=t.toLowerCase();for(let[e,n]of Object.entries({观察:"look",查看:"look",看:"look",物品:"items",查看物品:"items",背包:"inv",查看背包:"inv",帮助:"help",保存:"save",读取:"load",加载:"load",清除:"clear",清空:"clear",北:"north",南:"south",东:"east",西:"west",上:"up",下:"down",去北:"go north",去南:"go south",去东:"go east",去西:"go west",去上:"go up",去下:"go down",向北:"go north",向南:"go south",向东:"go east",向西:"go west",向上:"go up",向下:"go down",去北方:"go north",去南方:"go south",去东方:"go east",去西方:"go west",向上方:"go up",向下方:"go down"}))if(t.includes(e)||t.toLowerCase()===e.toLowerCase()){s=n;break}switch(i(t=>[...t,{type:"user",content:"> ".concat(e)}]),s){case"look":S&&(i(e=>[...e,{type:"room-name",content:S.name,className:"room-name",fullContent:S.name}]),setTimeout(()=>{i(e=>[...e,{type:"room-desc",content:S.desc,fullContent:S.desc}])},100),V());break;case"items":if(S&&S.items){let e=S.items.map(e=>e.desc?"".concat(e.name,": ").concat(e.desc):e.name).join("\n");i(t=>[...t,{type:"system",content:"你看到：\n".concat(e),fullContent:"你看到：\n".concat(e)}]),V()}break;case"inv":case"inventory":if(0===b.length)i(e=>[...e,{type:"system",content:"你的背包是空的。",fullContent:"你的背包是空的。"}]);else{let e=b.map(e=>"  • ".concat(e)).join("\n");i(t=>[...t,{type:"system",content:"你的背包：\n".concat(e),fullContent:"你的背包：\n".concat(e)}]),V()}break;case"help":i(e=>[...e,{type:"system",content:"可用命令：\n  LOOK/观察 - 观察四周\n  ITEMS/物品 - 列出房间内的物品\n  INV/背包 - 检查你的背包\n  HELP/帮助 - 显示此帮助消息\n  GO 北/去北 - 向北移动",fullContent:"可用命令：\n  LOOK/观察 - 观察四周\n  ITEMS/物品 - 列出房间内的物品\n  INV/背包 - 检查你的背包\n  HELP/帮助 - 显示此帮助消息\n  GO 北/去北 - 向北移动"}]),V();break;case"save":i(e=>[...e,{type:"system",content:"游戏已保存！",fullContent:"游戏已保存！"}]),V();break;case"load":i(e=>[...e,{type:"system",content:"游戏已加载！",fullContent:"游戏已加载！"}]),V();break;case"clear":if(i([]),C([]),g([]),J([]),I&&I.scenes&&I.start){let e=I.scenes[I.start];e&&(D(e),g(e.exits||[]),i([{type:"room-name",content:e.name,className:"room-name",fullContent:e.name},{type:"room-desc",content:e.desc,fullContent:e.desc}]))}break;default:let n=null,r=s.toLowerCase(),a=t.toLowerCase(),o=null;if(u.length>0)for(let e of u){let t=Array.isArray(e.dir)?e.dir[0]:e.dir,s=e.text||t,n=(s?F[s.toLowerCase()]||s:"未知").toLowerCase(),r=(null==s?void 0:s.toLowerCase())||"",l=(null==t?void 0:t.toLowerCase())||"";if(a.includes(n)||a.includes(r)||a.includes(l)||n.includes(a)||r.includes(a)||l.includes(a)){o=e;break}}if(o){let e=Array.isArray(o.dir)?o.dir[0]:o.dir,t=o.text||e,s=t?F[t.toLowerCase()]||t:"未知",n=o.target||o.id,r="> ".concat(s);i(e=>[...e,{type:"user-choice",content:r}]),K(n,s,o.effect,o.status_update);return}for(let[e,t]of Object.entries({n:"north",s:"south",e:"east",w:"west",north:"north",south:"south",east:"east",west:"west",up:"up",down:"down",u:"up",d:"down"}))if(r===e||r.startsWith(e+" ")||r.startsWith("go "+e)){n=t;break}if(!n){for(let[e,s]of Object.entries({北:"north",南:"south",东:"east",西:"west",上:"up",下:"down"}))if(t.includes(e)||t.toLowerCase().includes(e.toLowerCase())){n=s;break}}if(n){if(S&&S.exits){let e=S.exits.find(e=>{let t=Array.isArray(e.dir)?e.dir[0]:e.dir,s=e.text||t;return s&&s.toLowerCase()===n});if(e){let t=Array.isArray(e.dir)?e.dir[0]:e.dir,s=e.text||t,r=s?F[s.toLowerCase()]||s:n,a="> ".concat(r);i(e=>[...e,{type:"user-choice",content:a}]),K(e.target||e.id,"".concat(r),e.effect,e.status_update)}else i(e=>[...e,{type:"system",content:"向 ".concat(n," 没有出口。"),fullContent:"向 ".concat(n," 没有出口。")}]),V()}}else i(t=>[...t,{type:"system",content:"未知命令：".concat(e,"。输入 HELP 查看可用命令。"),fullContent:"未知命令：".concat(e,"。输入 HELP 查看可用命令。")}]),V()}},K=(e,t,s,n)=>{try{if("string"!=typeof e||!e.trim())throw Error("无效的场景ID");let r=I.scenes[e];if(!r)throw Error("无法找到目标场景: ".concat(e));D(r),g(r.exits||[]),i(e=>[...e,{type:"room-name",content:r.name,className:"room-name",fullContent:r.name},{type:"room-desc",content:r.desc,fullContent:r.desc}]),s&&_(e=>{let t={...e};return s.health&&(t.health=Math.max(0,Math.min(100,e.health+s.health))),s.stamina&&(t.stamina=Math.max(0,Math.min(100,e.stamina+s.stamina))),t}),n&&_(e=>{let t={...e};return void 0!==n.health&&(t.health=Math.max(0,Math.min(100,n.health))),void 0!==n.stamina&&(t.stamina=Math.max(0,Math.min(100,n.stamina))),t});let a=[];s&&(s.health&&a.push("健康值".concat(s.health>0?"增加":"减少"," ").concat(Math.abs(s.health))),s.stamina&&a.push("体力值".concat(s.stamina>0?"增加":"减少"," ").concat(Math.abs(s.stamina)))),n&&(void 0!==n.health&&a.push("健康值设置为 ".concat(n.health)),void 0!==n.stamina&&a.push("体力值设置为 ".concat(n.stamina))),a.length>0&&setTimeout(()=>{i(e=>[...e,{type:"system",content:"✨ ".concat(a.join("，")),fullContent:"✨ ".concat(a.join("，"))}]),V()},100),C(e=>[...e,...(r.items||[]).map(e=>Array.isArray(e.name)?e.name[0]:e.name)]),J(e=>[...e,{id:r.id,name:r.name,timestamp:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),action:t}])}catch(t){let e=t instanceof Error?t.message:"发生未知错误";if(i(t=>[...t,{type:"system",content:"⚠️  场景跳转异常：".concat(e,"\n\n系统正在重新加载当前场景的可选分支..."),fullContent:"⚠️  场景跳转异常：".concat(e,"\n\n系统正在重新加载当前场景的可选分支...")}]),S){g(S.exits||[]);let e=S.exits||[];if(e.length>0){let t=e.map((e,t)=>{let s=e.text||e.dir||"未知选项";return"".concat(t+1,". ").concat(s)}).join("\n");setTimeout(()=>{i(e=>[...e,{type:"system",content:"✅ 当前场景可用分支：\n".concat(t),fullContent:"✅ 当前场景可用分支：\n".concat(t)}]),V()},1e3)}}V()}},P=e=>{let t=new FileReader;t.onload=e=>{try{var t,s;let n=JSON.parse(null==(t=e.target)?void 0:t.result);if(n.scenes&&n.start){console.log("检测到标准JSON格式"),U(n),i([]),C([]),g([]);let e=n.scenes[n.start];e?(D(e),g(e.exits||[]),i([{type:"room-name",content:e.name,className:"room-name",fullContent:e.name},{type:"room-desc",content:e.desc,fullContent:e.desc}]),setTimeout(()=>{i(e=>[...e,{type:"system",content:"游戏导入成功！",fullContent:"游戏导入成功！"}]),V()},500)):(i([{type:"system",content:"无法找到起始场景："+n.start,fullContent:"无法找到起始场景："+n.start}]),V())}else if(n.playerId&&n.rooms){console.log("检测到用户提供的JSON格式"),i([]),C([]),g([]);let e=n.rooms.find(e=>e.id===n.playerId);if(e){let t=Array.isArray(e.desc)?e.desc.join("\n\n"):e.desc,s={id:e.id,name:e.name,desc:t,exits:e.exits,items:e.items};D(s),g(e.exits||[]),i([{type:"room-name",content:e.name,className:"room-name",fullContent:e.name},{type:"room-desc",content:t,fullContent:t}]),setTimeout(()=>{i(e=>[...e,{type:"system",content:"游戏导入成功！",fullContent:"游戏导入成功！"}]),V()},500)}else i([{type:"system",content:"无法找到起始房间："+n.playerId,fullContent:"无法找到起始房间："+n.playerId}]),V()}else if(n.scene&&n.inventory){if(console.log("检测到我们期望的JSON格式"),n.scene){let e=I.scenes[n.scene];e&&(D(e),g(e.exits||[]))}n.inventory&&C(n.inventory),n.history&&i(n.history),setTimeout(()=>{i(e=>[...e,{type:"system",content:"游戏导入成功！",fullContent:"游戏导入成功！"}]),V()},500)}else if(n.playerState){console.log("检测到游戏进度格式");let{playerState:e,...t}=n;if(U(t),e.scene){let s=t.scenes[e.scene];s&&(D(s),g(s.exits||[]))}e.inventory&&C(e.inventory),e.history&&i(e.history),e.playerStats&&_(e.playerStats),setTimeout(()=>{i(e=>[...e,{type:"system",content:"游戏进度导入成功！",fullContent:"游戏进度导入成功！"}]),V()},500)}else if(n.game_title&&n.branches&&Array.isArray(n.branches)){console.log("检测到新游戏文件格式"),i([]),C([]),g([]);let e=n.branches[0];if(e){let t={id:e.branch_id,name:e.chapter||e.branch_id,desc:e.scene_detail||"",exits:(null==(s=e.choices)?void 0:s.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]};D(t),g(t.exits),i([{type:"room-name",content:n.game_title,className:"room-name",fullContent:n.game_title},{type:"room-desc",content:n.description||"",fullContent:n.description||""},{type:"room-name",content:e.chapter||e.branch_id,className:"room-name",fullContent:e.chapter||e.branch_id},{type:"room-desc",content:e.scene_detail||"",fullContent:e.scene_detail||""}]),U({start:e.branch_id,scenes:n.branches.reduce((e,t)=>{var s;return e[t.branch_id]={id:t.branch_id,name:t.chapter||t.branch_id,desc:t.scene_detail||"",exits:(null==(s=t.choices)?void 0:s.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]},e},{})}),setTimeout(()=>{i(e=>[...e,{type:"system",content:"游戏导入成功！",fullContent:"游戏导入成功！"}]),V()},500)}else i([{type:"system",content:"无法找到起始分支",fullContent:"无法找到起始分支"}]),V()}else console.log("无法识别的JSON格式"),i([{type:"system",content:"无法识别的JSON格式。请提供有效的游戏文件。",fullContent:"无法识别的JSON格式。请提供有效的游戏文件。"}]),V()}catch(e){console.error("JSON解析错误：",e),i([{type:"system",content:"游戏导入失败：无效的 JSON",fullContent:"游戏导入失败：无效的 JSON"}]),V()}},t.readAsText(e)};return((0,r.useEffect)(()=>{e||(0===l.length||2===l.length)&&setTimeout(()=>{let e=document.body.scrollHeight||document.documentElement.scrollHeight;window.scrollTo({top:e,behavior:"smooth"})},100)},[l,e]),O)?(0,n.jsxs)("div",{className:"min-h-screen bg-white text-gray-900 font-sans antialiased",suppressHydrationWarning:!0,children:[s&&(0,n.jsx)("div",{className:"fixed inset-0 z-50",children:(0,n.jsx)("iframe",{src:"/game-editor",className:"w-full h-full border-0",title:"Game Editor"})}),H&&(0,n.jsx)("div",{className:"h-1 bg-indigo-600 w-full fixed top-0 left-0 animate-pulse z-20"}),e&&(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50/30 to-purple-50/30 flex flex-col items-center justify-start text-center p-4 sm:p-8 z-50 overflow-y-auto relative",suppressHydrationWarning:!0,children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-400/5 via-purple-400/5 to-pink-400/5 backdrop-blur-sm"}),(0,n.jsxs)("div",{className:"w-full max-w-2xl mx-auto pt-6 sm:pt-10 lg:pt-12 relative z-10",children:[(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg shadow-indigo-500/10 p-4 sm:p-6 lg:p-8 mb-4 sm:mb-5 border border-white/50",children:[(0,n.jsxs)("div",{className:"mb-5 sm:mb-6",children:[(0,n.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2 sm:mb-3 tracking-tight leading-tight",suppressHydrationWarning:!0,children:"文本引擎"}),(0,n.jsx)("div",{className:"w-16 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 mx-auto rounded-full shadow-lg shadow-indigo-500/30"})]}),(0,n.jsx)("p",{className:"text-slate-600 text-base sm:text-lg lg:text-xl mb-3 sm:mb-4 leading-relaxed tracking-wide",suppressHydrationWarning:!0,children:"使用这个引擎，你可以制作自己的文字冒险游戏"}),(0,n.jsxs)("p",{className:"text-slate-500 text-sm sm:text-base lg:text-lg mb-1.5 sm:mb-2 leading-relaxed",suppressHydrationWarning:!0,children:["支持 ",(0,n.jsx)("span",{className:"text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text font-semibold",children:"中文"})," 和 ",(0,n.jsx)("span",{className:"text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text font-semibold",children:"英文"})," 命令"]}),(0,n.jsxs)("p",{className:"text-slate-500 text-sm sm:text-base lg:text-lg leading-relaxed",suppressHydrationWarning:!0,children:["输入 ",(0,n.jsx)("span",{className:"text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text font-semibold",children:"观察"})," 或 ",(0,n.jsx)("span",{className:"text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text font-semibold",children:"LOOK"})," 查看四周"]})]}),(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg shadow-indigo-500/10 p-4 sm:p-6 lg:p-8 mb-4 sm:mb-5 border border-white/50",children:[(0,n.jsx)("button",{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 transition-all duration-300 font-bold px-6 sm:px-8 py-3.5 sm:py-4 lg:py-5 rounded-xl shadow-lg shadow-purple-500/20 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95 text-base sm:text-lg lg:text-xl",onClick:()=>{t(!1);let e=I.scenes[I.start];D(e),g(e.exits||[]),i([{type:"room-name",content:e.name,className:"room-name",fullContent:e.name},{type:"room-desc",content:e.desc,fullContent:e.desc}])},children:"\uD83D\uDE80 开始游戏"}),(0,n.jsx)("button",{className:"w-full mt-3 sm:mt-4 bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-bold px-6 sm:px-8 py-3.5 sm:py-4 lg:py-5 rounded-xl shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30 active:scale-95 text-base sm:text-lg lg:text-xl",onClick:()=>{t(!1),a(!0)},children:"\uD83D\uDCDD 文本游戏制作"})]}),(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg shadow-indigo-500/10 p-4 sm:p-6 lg:p-8 mb-4 sm:mb-5 border border-white/50",children:[(0,n.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-slate-800 mb-3 sm:mb-4",children:"选择示例故事"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[(0,n.jsx)("button",{onClick:async()=>{try{let s=await fetch("/一个帽子_修复版.json"),n=await s.json();i([]),C([]),g([]);let r=n.branches[0];if(r){var e;let s={id:r.branch_id,name:r.chapter||r.branch_id,desc:r.scene_detail||"",exits:(null==(e=r.choices)?void 0:e.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]};D(s),g(s.exits),i([{type:"room-name",content:n.game_title,className:"room-name",fullContent:n.game_title},{type:"room-desc",content:n.description||"",fullContent:n.description||""},{type:"room-name",content:r.chapter||r.branch_id,className:"room-name",fullContent:r.chapter||r.branch_id},{type:"room-desc",content:r.scene_detail||"",fullContent:r.scene_detail||""}]),U({start:r.branch_id,scenes:n.branches.reduce((e,t)=>{var s;return e[t.branch_id]={id:t.branch_id,name:t.chapter||t.branch_id,desc:t.scene_detail||"",exits:(null==(s=t.choices)?void 0:s.map(e=>({text:e.choice,target:e.next_branch,effect:e.effect,status_update:e.status_update,end_game:e.end_game})))||[]},e},{})}),t(!1)}}catch(e){console.error("加载示例故事失败:",e),i([{type:"system",content:"加载示例故事失败，请重试。",fullContent:"加载示例故事失败，请重试。"}]),t(!1)}},className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 font-bold px-4 sm:px-5 py-3 sm:py-4 rounded-xl shadow-lg shadow-blue-500/20 hover:shadow-xl hover:shadow-blue-500/30 active:scale-95 text-sm sm:text-base",children:"示例故事1"}),(0,n.jsx)("button",{onClick:()=>{alert("示例故事2即将推出！")},className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 transition-all duration-300 font-bold px-4 sm:px-5 py-3 sm:py-4 rounded-xl shadow-lg shadow-purple-500/20 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95 text-sm sm:text-base",children:"示例故事2"}),(0,n.jsx)("button",{onClick:()=>{alert("示例故事3即将推出！")},className:"bg-gradient-to-r from-green-600 to-teal-600 text-white hover:from-green-700 hover:to-teal-700 transition-all duration-300 font-bold px-4 sm:px-5 py-3 sm:py-4 rounded-xl shadow-lg shadow-green-500/20 hover:shadow-xl hover:shadow-green-500/30 active:scale-95 text-sm sm:text-base",children:"示例故事3"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-5",children:[(0,n.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="example-story.json",s.click(),URL.revokeObjectURL(t)},className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 py-2.5 sm:py-3 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95",children:"\uD83D\uDCC4 示例JSON"}),(0,n.jsx)("button",{onClick:()=>window.open("JSON-GUIDE.html","_blank"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 py-2.5 sm:py-3 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95",children:"\uD83D\uDE80 星际探索"}),(0,n.jsx)("button",{onClick:()=>window.open("USER-GUIDE.html","_blank"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 py-2.5 sm:py-3 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95",children:"\uD83D\uDCDA 用户指南"}),(0,n.jsx)("button",{onClick:()=>window.open("/validator","_blank"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 py-2.5 sm:py-3 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95",children:"✅ JSON验证器"}),(0,n.jsx)("button",{onClick:()=>{window.location.href="/validator"},className:"bg-transparent text-emerald-600 hover:text-emerald-700 border-2 border-emerald-600 hover:border-emerald-700 transition-all duration-300 font-bold px-3 sm:px-4 py-2.5 sm:py-3 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95",children:"\uD83C\uDFAF 增强验证器"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50/80 via-purple-50/80 to-pink-50/80 backdrop-blur-xl rounded-2xl p-4 sm:p-5 lg:p-6 border border-white/50 shadow-lg shadow-indigo-500/5",children:[(0,n.jsxs)("h3",{className:"text-transparent bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text font-semibold text-base sm:text-lg lg:text-xl mb-3 sm:mb-4 flex items-center gap-2",children:[(0,n.jsx)("span",{children:"\uD83D\uDE80"})," 快速开始指南"]}),(0,n.jsxs)("div",{className:"text-left space-y-1.5 sm:space-y-2 text-sm sm:text-base lg:text-lg text-slate-600",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text",children:"1. 开始游戏："}),"点击主按钮，立即开始冒险"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text",children:"2. 探索世界："}),"使用 ",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"观察"})," 或 ",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"LOOK"})," 查看，",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"北"})," 或 ",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"GO 北"})," 移动"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text",children:"3. 互动操作："}),(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"物品"})," 或 ",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"ITEMS"})," 查看物品，",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"背包"})," 或 ",(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"INV"})," 查看背包"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text",children:"4. 对话系统："}),(0,n.jsx)("span",{className:"bg-white/80 px-2 py-0.5 rounded text-xs font-medium",children:"TALK TO 角色名"})," 与NPC交流"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text",children:"5. 自定义故事："}),"下载示例JSON → 修改 → 导入 → 开始冒险！"]})]})]})]})]}),!e&&!s&&(0,n.jsxs)("div",{className:"flex flex-col min-h-screen w-full bg-gradient-to-br from-slate-50 via-indigo-50/20 to-purple-50/20 relative overflow-hidden",suppressHydrationWarning:!0,children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-400/5 via-purple-400/5 to-pink-400/5 backdrop-blur-sm"}),(0,n.jsx)("div",{className:"bg-white/90 backdrop-blur-xl border-b border-white/50 sticky top-0 z-10 shadow-lg shadow-indigo-500/5 relative pt-[env(safe-area-inset-top)]",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{className:"px-3 sm:px-5 lg:px-7 py-3 sm:py-4 lg:py-5",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-3 lg:gap-4",children:[(0,n.jsxs)("h1",{className:"text-base sm:text-xl lg:text-3xl font-extrabold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent tracking-tight flex items-center gap-1 sm:gap-1.5 lg:gap-2 whitespace-nowrap",suppressHydrationWarning:!0,children:[(0,n.jsx)("span",{className:"text-base sm:text-xl lg:text-3xl",children:"\uD83C\uDFAE"}),(0,n.jsx)("span",{children:"文本引擎"})]}),(0,n.jsxs)("div",{className:"flex flex-nowrap gap-2 sm:gap-2 lg:gap-3 items-center justify-center w-full sm:w-auto",suppressHydrationWarning:!0,children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("label",{className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-4 py-2 sm:py-2.5 lg:py-3 rounded-lg text-xs sm:text-sm lg:text-sm flex items-center gap-1 sm:gap-1.5 lg:gap-1.5 cursor-pointer shadow-sm hover:shadow-md active:scale-95 min-w-[90px] h-[44px] sm:h-auto justify-center",style:{minHeight:"44px"},children:[(0,n.jsx)("span",{className:"text-base sm:text-base lg:text-base",children:"\uD83D\uDCE4"}),(0,n.jsx)("span",{className:"inline",children:"导入"})]}),(0,n.jsx)("input",{type:"file",accept:".json,application/json",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&P(s)},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),(0,n.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="game-data.json",s.click(),URL.revokeObjectURL(t)},className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-4 py-2 sm:py-2.5 lg:py-3 rounded-lg text-xs sm:text-sm lg:text-sm flex items-center gap-1 sm:gap-1.5 lg:gap-1.5 shadow-sm hover:shadow-md active:scale-95 min-w-[90px] h-[44px] sm:h-auto justify-center",style:{minHeight:"44px"},children:[(0,n.jsx)("span",{className:"text-base sm:text-base lg:text-base",children:"\uD83D\uDCE5"}),(0,n.jsx)("span",{className:"inline",children:"导出JSON"})]}),(0,n.jsxs)("a",{href:"https://simplefeedback.app/feedback/nDf7Lhk7Ohnw",target:"_blank",className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-4 py-2 sm:py-2.5 lg:py-3 rounded-lg text-xs sm:text-sm lg:text-sm flex items-center gap-1 sm:gap-1.5 lg:gap-1.5 shadow-sm hover:shadow-md active:scale-95 min-w-[90px] h-[44px] sm:h-auto justify-center",style:{minHeight:"44px"},suppressHydrationWarning:!0,children:[(0,n.jsx)(f,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-5 lg:h-5"}),(0,n.jsx)("span",{className:"inline",children:"反馈"})]}),(0,n.jsxs)("button",{onClick:()=>{window.location.href="/validator.html"},className:"bg-transparent text-emerald-600 hover:text-emerald-700 border-2 border-emerald-600 hover:border-emerald-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-4 py-2 sm:py-2.5 lg:py-3 rounded-lg text-xs sm:text-sm lg:text-sm flex items-center gap-1 sm:gap-1.5 lg:gap-1.5 shadow-sm hover:shadow-md active:scale-95 min-w-[90px] h-[44px] sm:h-auto justify-center",style:{minHeight:"44px"},suppressHydrationWarning:!0,children:[(0,n.jsx)(j,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-5 lg:h-5"}),(0,n.jsx)("span",{className:"inline",children:"验证JSON"})]}),(0,n.jsxs)("button",{onClick:()=>{t(!0),i([]),D(null),g([])},className:"bg-blue-500 text-white hover:bg-blue-600 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-4 py-2 sm:py-2.5 lg:py-3 rounded-lg text-xs sm:text-sm lg:text-sm flex items-center gap-1 sm:gap-1.5 lg:gap-1.5 shadow-sm hover:shadow-md active:scale-95 min-w-[90px] h-[44px] sm:h-auto justify-center",style:{minHeight:"44px"},children:[(0,n.jsx)(y,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-5 lg:h-5"}),(0,n.jsx)("span",{className:"inline",children:"返回主菜单"})]})]})]})})}),(0,n.jsx)("div",{className:"flex-grow overflow-y-auto p-3 sm:p-4 lg:p-6 space-y-2 sm:space-y-3 lg:space-y-4 font-sans text-slate-800 relative z-10",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{ref:z,className:"min-h-[120px] sm:min-h-[180px] lg:min-h-[220px] max-w-4xl mx-auto",suppressHydrationWarning:!0,children:l.map((e,t)=>{switch(e.type){case"room-name":return(0,n.jsx)("div",{className:"bg-gradient-to-br from-indigo-50/90 via-purple-50/90 to-pink-50/90 backdrop-blur-xl rounded-2xl p-4 sm:p-5 lg:p-6 mb-3 sm:mb-4 lg:mb-5 border border-white/60 shadow-xl shadow-indigo-500/10 hover:shadow-2xl hover:shadow-indigo-500/15 transition-all duration-300",suppressHydrationWarning:!0,children:(0,n.jsx)("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent tracking-tight leading-tight",suppressHydrationWarning:!0,children:e.content})},t);case"room-desc":return(0,n.jsx)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl p-4 sm:p-5 lg:p-6 mb-3 sm:mb-4 lg:mb-5 border border-white/60 shadow-lg shadow-indigo-500/5 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300 leading-relaxed text-slate-600 text-sm sm:text-base lg:text-lg xl:text-xl whitespace-pre-line",suppressHydrationWarning:!0,children:(0,n.jsx)(k,{text:e.fullContent||e.content,delay:10,onComplete:V})},t);case"user":return(0,n.jsx)("div",{className:"bg-gradient-to-br from-indigo-50/90 to-indigo-100/90 backdrop-blur-xl rounded-2xl p-3 sm:p-4 lg:p-5 mb-2 sm:mb-3 lg:mb-4 border-l-4 border-indigo-500 shadow-lg shadow-indigo-500/10 hover:shadow-xl hover:shadow-indigo-500/15 transition-all duration-300",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"text-indigo-700 font-semibold text-sm sm:text-base lg:text-lg xl:text-xl flex items-center gap-1.5 sm:gap-2 lg:gap-3",suppressHydrationWarning:!0,children:[(0,n.jsx)("span",{className:"text-sm sm:text-base lg:text-xl xl:text-2xl",children:"\uD83D\uDC64"}),(0,n.jsx)("span",{className:"leading-relaxed",children:e.content})]})},t);case"system":return(0,n.jsx)("div",{className:"bg-gradient-to-br from-slate-50/90 to-slate-100/90 backdrop-blur-xl rounded-2xl p-3 sm:p-4 lg:p-5 mb-2 sm:mb-3 lg:mb-4 border border-white/60 shadow-lg shadow-indigo-500/5 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{className:"text-slate-600 text-sm sm:text-base lg:text-lg xl:text-xl leading-relaxed",suppressHydrationWarning:!0,children:(0,n.jsx)(k,{text:e.fullContent||e.content,delay:8,onComplete:V})})},t);case"user-choice":return(0,n.jsx)("div",{className:"bg-gradient-to-br from-emerald-50/90 to-emerald-100/90 backdrop-blur-xl rounded-2xl p-3 sm:p-4 lg:p-5 mb-2 sm:mb-3 lg:mb-4 border-l-4 border-emerald-500 shadow-lg shadow-emerald-500/10 hover:shadow-xl hover:shadow-emerald-500/15 transition-all duration-300",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"text-emerald-700 font-semibold text-sm sm:text-base lg:text-lg xl:text-xl flex items-center gap-1.5 sm:gap-2 lg:gap-3",suppressHydrationWarning:!0,children:[(0,n.jsx)("span",{className:"text-sm sm:text-base lg:text-xl xl:text-2xl",children:"➡️"}),(0,n.jsx)("span",{className:"leading-relaxed",children:e.content})]})},t);case"choices-data":return null;default:return(0,n.jsx)("div",{className:"bg-gradient-to-br from-slate-50/90 to-slate-100/90 backdrop-blur-xl rounded-2xl p-2 sm:p-3 lg:p-4 mb-1.5 sm:mb-2 lg:mb-3 border border-white/60 shadow-lg shadow-indigo-500/5 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{className:"text-slate-600 text-xs sm:text-sm lg:text-base",suppressHydrationWarning:!0,children:e.content})},t)}})})}),(0,n.jsx)("div",{className:"p-4 sm:p-5 lg:p-6 bg-gradient-to-r from-indigo-50/50 to-purple-50/50 border-t border-indigo-100 relative z-20",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 lg:gap-4 max-w-4xl mx-auto",suppressHydrationWarning:!0,children:u.length>0?u.map((e,t)=>{let s=Array.isArray(e.dir)?e.dir[0]:e.dir,r=e.text||s,a=r?F[r.toLowerCase()]||r:"未知",o=e.target||e.id,l=[];e.effect&&(e.effect.health&&l.push("健康".concat(e.effect.health>0?"+":"").concat(e.effect.health)),e.effect.stamina&&l.push("体力".concat(e.effect.stamina>0?"+":"").concat(e.effect.stamina))),e.status_update&&(void 0!==e.status_update.health&&l.push("健康→".concat(e.status_update.health)),void 0!==e.status_update.stamina&&l.push("体力→".concat(e.status_update.stamina)));let d=l.length>0?" (".concat(l.join(", "),")"):"";return(0,n.jsx)("button",{onClick:()=>{W(!0);let t="> ".concat(a);i(e=>[...e,{type:"user-choice",content:t}]),setTimeout(()=>{W(!1),K(o,a,e.effect,e.status_update)},500)},disabled:H,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 transition-all duration-300 font-bold px-4 sm:px-5 lg:px-6 py-2.5 sm:py-3 lg:py-3.5 rounded-xl shadow-lg shadow-purple-500/20 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[90px] sm:min-w-[100px] lg:min-w-[120px] touch-manipulation relative z-30",children:(0,n.jsxs)("span",{className:"leading-tight",children:[a,d]})},t)}):null})}),(0,n.jsx)("div",{className:"p-3.5 sm:p-4 lg:p-5 bg-gradient-to-br from-white/90 to-indigo-50/50 backdrop-blur-xl border-t border-b border-white/60",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2 sm:gap-2.5 lg:gap-3 max-w-4xl mx-auto",suppressHydrationWarning:!0,children:[(0,n.jsxs)("button",{onClick:()=>G("look"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(d,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"观察"})]}),(0,n.jsxs)("button",{onClick:()=>G("items"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(w,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"物品"})]}),(0,n.jsxs)("button",{onClick:()=>G("inv"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(o,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"背包"})]}),(0,n.jsxs)("button",{onClick:()=>G("help"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(v,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"帮助"})]}),(0,n.jsxs)("button",{onClick:()=>G("save"),className:"bg-transparent text-green-600 hover:text-green-700 border-2 border-green-600 hover:border-green-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(c,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"保存"})]}),(0,n.jsxs)("button",{onClick:()=>G("load"),className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(p,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"读取"})]}),(0,n.jsxs)("button",{onClick:()=>G("clear"),className:"bg-transparent text-red-600 hover:text-red-700 border-2 border-red-600 hover:border-red-700 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95",children:[(0,n.jsx)(m,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"清除"})]}),(0,n.jsxs)("button",{onClick:()=>B(!T),className:"bg-transparent border-2 transition-all duration-300 font-bold px-2 sm:px-2.5 lg:px-3 py-1.5 sm:py-2 lg:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-1.5 min-w-0 shadow-sm hover:shadow-md active:scale-95 ".concat(T?"text-indigo-800 border-indigo-800":"text-purple-600 hover:text-purple-700 border-purple-600 hover:border-purple-700"),children:[(0,n.jsx)(j,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base",children:"时间线"})]})]})}),T&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",suppressHydrationWarning:!0,children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-4 sm:p-6 flex items-center justify-between",suppressHydrationWarning:!0,children:[(0,n.jsxs)("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white flex items-center gap-2 sm:gap-3",suppressHydrationWarning:!0,children:[(0,n.jsx)(j,{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12"}),"剧情时间线"]}),(0,n.jsx)("button",{onClick:()=>B(!1),className:"bg-transparent text-white border-2 border-white/50 hover:border-white transition-all duration-300 font-bold rounded-lg p-2 sm:p-2.5 shadow-sm hover:shadow-md active:scale-95",children:(0,n.jsx)(x,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8"})})]}),(0,n.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto flex-grow",suppressHydrationWarning:!0,children:0===R.length?(0,n.jsxs)("div",{className:"text-center text-slate-500 py-8 sm:py-12 text-sm sm:text-base lg:text-lg",suppressHydrationWarning:!0,children:[(0,n.jsx)("span",{className:"text-4xl sm:text-5xl lg:text-6xl block mb-3 sm:mb-4",children:"\uD83D\uDCED"}),"暂无剧情记录"]}):(0,n.jsxs)("div",{className:"relative",suppressHydrationWarning:!0,children:[(0,n.jsx)("div",{className:"absolute left-4 sm:left-6 top-0 bottom-0 w-0.5 bg-gradient-to-b from-indigo-500 via-purple-500 to-pink-500 rounded-full",suppressHydrationWarning:!0}),R.map((e,t)=>(0,n.jsxs)("div",{className:"relative pl-10 sm:pl-14 pb-6 sm:pb-8 last:pb-0",suppressHydrationWarning:!0,children:[(0,n.jsx)("div",{className:"absolute left-2 sm:left-3.5 top-1.5 sm:top-2 w-4 sm:w-5 h-4 sm:h-5 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full border-2 border-white shadow-lg shadow-indigo-500/30",suppressHydrationWarning:!0}),(0,n.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50/80 via-purple-50/80 to-pink-50/80 backdrop-blur-xl rounded-xl p-3 sm:p-4 lg:p-5 border border-white/50 shadow-lg shadow-indigo-500/5 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300",suppressHydrationWarning:!0,children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",suppressHydrationWarning:!0,children:[(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base text-slate-500 font-medium",suppressHydrationWarning:!0,children:e.timestamp}),(0,n.jsx)("span",{className:"text-xs sm:text-sm lg:text-base bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-2 sm:px-3 py-0.5 sm:py-1 rounded-full font-semibold",suppressHydrationWarning:!0,children:e.action})]}),(0,n.jsx)("h3",{className:"text-base sm:text-lg lg:text-xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent leading-tight",suppressHydrationWarning:!0,children:e.name})]})]},t))]})}),(0,n.jsx)("div",{className:"p-4 sm:p-6 border-t border-white/50 bg-slate-50/50",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm sm:text-base lg:text-lg text-slate-600",suppressHydrationWarning:!0,children:[(0,n.jsxs)("span",{children:["总场景数: ",(0,n.jsx)("span",{className:"font-bold text-indigo-600",children:R.length})]}),(0,n.jsx)("button",{onClick:()=>J([]),className:"bg-transparent text-red-600 hover:text-red-700 border-2 border-red-600 hover:border-red-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-5 py-2 sm:py-2.5 rounded-xl shadow-sm hover:shadow-md active:scale-95 text-sm sm:text-base lg:text-lg",children:"清空时间线"})]})})]})}),(0,n.jsx)("div",{className:"sticky bottom-0 z-40 bg-white/90 backdrop-blur-xl border-t border-white/50 shadow-lg shadow-indigo-500/5 relative",suppressHydrationWarning:!0,children:(0,n.jsx)("div",{className:"p-5 sm:p-6 lg:p-8 max-w-4xl mx-auto",suppressHydrationWarning:!0,children:(0,n.jsxs)("div",{className:"flex flex-row gap-3 sm:gap-4 items-center",suppressHydrationWarning:!0,children:[(0,n.jsxs)("div",{className:"flex-grow relative",suppressHydrationWarning:!0,children:[(0,n.jsx)("input",{id:"input",type:"text",placeholder:"输入命令（如：观察、北、物品）...",autoComplete:"off",onKeyPress:e=>{if("Enter"===e.key){let t=e.currentTarget.value.trim();t&&(G(t),e.currentTarget.value="")}},className:"w-full p-4 sm:p-5 lg:p-6 pr-20 sm:pr-24 lg:pr-28 rounded-xl border-2 border-white/50 bg-white/80 backdrop-blur focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all duration-300 font-sans text-base sm:text-lg lg:text-xl placeholder-slate-400 shadow-sm",suppressHydrationWarning:!0}),(0,n.jsx)("button",{onClick:()=>{let e=document.getElementById("input");e.value.trim()&&(G(e.value.trim()),e.value="")},className:"absolute right-2 sm:right-3 lg:right-4 top-1/2 -translate-y-1/2 bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-5 py-2 sm:py-2.5 lg:py-3 rounded-xl shadow-lg shadow-purple-500/20 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95 flex items-center justify-center",children:(0,n.jsx)(h,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7"})})]}),(0,n.jsxs)("div",{className:"flex gap-2 sm:gap-3 lg:gap-4 w-auto",suppressHydrationWarning:!0,children:[(0,n.jsxs)("button",{onClick:()=>{let e=new Blob([l.map(e=>e.fullContent||e.content).join("\n\n")],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="game-log.txt",s.click(),URL.revokeObjectURL(t)},className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-5 py-3 sm:py-3.5 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95 text-xs sm:text-sm lg:text-sm flex items-center justify-center gap-1.5 sm:gap-2 min-w-[80px] whitespace-nowrap",children:[(0,n.jsx)(N,{className:"w-4 h-4 sm:w-5 h-5 lg:w-5 h-5"}),(0,n.jsx)("span",{className:"inline",children:"导出TXT"})]}),(0,n.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify({...I,playerState:{scene:null==S?void 0:S.id,inventory:b,history:l,choices:u,playerStats:L,timestamp:new Date().toISOString()}},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="game-progress.json",s.click(),URL.revokeObjectURL(t)},className:"bg-transparent text-purple-600 hover:text-purple-700 border-2 border-purple-600 hover:border-purple-700 transition-all duration-300 font-bold px-3 sm:px-4 lg:px-5 py-3 sm:py-3.5 lg:py-4 rounded-xl shadow-sm hover:shadow-md active:scale-95 text-xs sm:text-sm lg:text-sm flex items-center justify-center gap-1.5 sm:gap-2 min-w-[80px] whitespace-nowrap",children:[(0,n.jsx)(c,{className:"w-4 h-4 sm:w-5 h-5 lg:w-5 h-5"}),(0,n.jsx)("span",{className:"inline",children:"导出进度"})]})]})]})})})]})]}):(0,n.jsx)("div",{className:"min-h-screen bg-white text-black flex items-center justify-center",children:"加载中..."})}},5661:(e,t,s)=>{Promise.resolve().then(s.bind(s,3792))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5661)),_N_E=e.O()}]);